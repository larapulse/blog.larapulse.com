<!DOCTYPE html><html lang="en"><head>
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//blog.larapulse.com">
<link rel="dns-prefetch" href="//larapulse.com">
<link rel="dns-prefetch" href="//habr.com">
<link rel="dns-prefetch" href="//api.larapulse.com">
<link rel="dns-prefetch" href="//github.com">
<link rel="dns-prefetch" href="//www.phpinternalsbook.com">
<link rel="dns-prefetch" href="//podgornyy.rocks">
<link rel="dns-prefetch" href="//louisbarranqueiro.github.io">
<link rel="dns-prefetch" href="//www.youtube.com">
<link rel="dns-prefetch" href="//www.instagram.com">
<link rel="dns-prefetch" href="//www.facebook.com">
<link rel="dns-prefetch" href="//www.linkedin.com">
<link rel="dns-prefetch" href="//twitter.com">
<link rel="dns-prefetch" href="//t.me"><script async src=https://www.googletagmanager.com/gtag/js?id=UA-122807654-1></script><script> window.dataLayer = window.dataLayer || []; function gtag(){ dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-122807654-2'); </script><title>PHP variables under the hood - PHP | Larapulse Technology Blog</title><meta charset=UTF-8><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=yes"><meta name=keywords content="larapulse,technology,blog,article,php,zval,under-the-hood,variables,refcount,is_ref,structures,pointers"><meta name=description content="We all know how to create a variable, how to get the value of a variable, and how to take a reference to a variable. Let&#039;s have a learn what happens in the interpreter when you change the value of a variable? Or when you delete it? How are the types of variables implemented?"><meta name=subject content="PHP variables under the hood - PHP | Larapulse Technology Blog"><meta name=author content="Sergey Podgorny"><meta name=publisher content="Larapulse Technology"><meta name=language content="en_GB"><meta name=copyright content="Larapulse Technology"><meta name=format-detection content="telephone=no"><meta name=topic content="PHP variables under the hood"><meta name=page-topic content="PHP variables under the hood"><meta name=designer content="Louis Barranqueiro"><meta name=owner content="Sergey Podgornyy, sergey.podgornyy@yahoo.de"><meta name=url content="/"><meta name=identifier-url content="/"><meta name=pagename content="PHP variables under the hood - PHP | Larapulse Technology Blog"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=medium content="blog"><meta name=pageKey content="blog::article.show.17"><meta name=google-site-verification content="3WYVb1kIZ6bM3SSFHxn5vjD9YgSr11qmrilWNnEJtX8"><meta name=msapplication-TileImage content="/static/images/logo_400x400.jpg"><meta name=msapplication-TileColor content="#F55338"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP variables under the hood - PHP | Larapulse Technology Blog"><meta name=twitter:description content="We all know how to create a variable, how to get the value of a variable, and how to take a reference to a variable. Let&#039;s have a learn what happens in the interpreter when you change the value of a variable? Or when you delete it? How are the types of variables implemented?"><meta name=twitter:image content="/files/original/images/20/6d/206de6d87d4587698a4cdb905b295d6a23f2cd15.png"><meta name=twitter:site content="@LarapulseT"><meta property="fb:app_id" content="321394058628025"><meta property="og:title" content="PHP variables under the hood"><meta property="og:url" content="/php/variables-under-the-hood"><meta property="og:locale" content="en_GB"><meta property="og:description" content="We all know how to create a variable, how to get the value of a variable, and how to take a reference to a variable. Let&#039;s have a learn what happens in the interpreter when you change the value of a variable? Or when you delete it? How are the types of variables implemented?"><meta property="og:site_name" content="Larapulse Technology Blog"><meta property="og:type" content="article"><meta property="og:image" content="/files/original/images/20/6d/206de6d87d4587698a4cdb905b295d6a23f2cd15.png"><meta property="og:image:url" content="/files/original/images/20/6d/206de6d87d4587698a4cdb905b295d6a23f2cd15.png"><meta property="og:image:secure_url" content="/files/original/images/20/6d/206de6d87d4587698a4cdb905b295d6a23f2cd15.png"><meta property="og:image:type" content="image/png"><meta property="og:image" content="/files/original/images/ed/d9/edd9c84af2350b283ab51e407b0a6eea0a53703b.png"><meta property="og:image:url" content="/files/original/images/ed/d9/edd9c84af2350b283ab51e407b0a6eea0a53703b.png"><meta property="og:image:secure_url" content="/files/original/images/ed/d9/edd9c84af2350b283ab51e407b0a6eea0a53703b.png"><meta property="og:image:type" content="image/png"><meta property="article:published_time" content="2018-09-13T19:06:46+00:00"><meta property="article:modified_time" content="2018-09-13T19:06:51+00:00"><meta property="article:author" content="Sergey Podgorny"><meta property="article:section" content="PHP"><meta property="article:tag" content=""><meta property="profile:first_name" content="Sergey"><meta property="profile:last_name" content="Podgorny"><meta property="profile:username" content="sergey.podgornyy"><meta http-equiv="Content-type" content="text/html; charset=UTF-8"><meta http-equiv="Content-language" content="en_GB"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><link rel="icon" href="/static/images/favicon.ico" ><link rel="shortcut icon" href="/static/images/favicon.ico" ><link rel="icon" href="/static/images/logo_192x192.jpg" sizes="192x192" ><link rel="apple-touch-icon" href="/static/images/logo_180x180.jpg" sizes="180x180" ><link rel="apple-touch-icon" href="/static/images/logo_152x152.jpg" sizes="152x152" ><link rel="apple-touch-icon" href="/static/images/logo_120x120.jpg" sizes="120x120" ><link rel="apple-touch-icon" href="/static/images/logo_76x76.jpg" sizes="76x76" ><link rel="apple-touch-icon" href="/static/images/logo_57x57.jpg" sizes="57x57" ><link rel="index" href="/" title="Larapulse Technology" ><link rel="help" href="/faq" title="FAQ" ><link rel="original-source" href="https://habr.com/post/162713/" ><link rel="publisher" href="/" ><link rel="image_src" href="/files/original/images/20/6d/206de6d87d4587698a4cdb905b295d6a23f2cd15.png" ><link rel="canonical" href="/php/variables-under-the-hood" ><link rel="alternate" href="/feed/atom.xml" type=application/atom+xml title="Atom 0.3" ><link rel="alternate" href="/feed/rss.xml" type=application/rss+xml title="RSS" ><link media="all" type=text/css rel="stylesheet" href="/assets/main.4065552450.css"><style> .badge.chip-variables-under-the-hood { background-color: #777ab3; } @media only screen and (max-width: 479px) { .post-group .post.item .badge.chip-variables-under-the-hood { border: 2px solid #777ab3 !important; background-color: #fff; padding: 3px 16px; } .post-group .post.item .badge.chip-variables-under-the-hood a { color: #777ab3 !important; } } </style><!--[if lt IE 9]><script src=//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.4065552450.js></script><script src=//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.4065552450.js></script><![endif]--><script>var apiUrl = 'https://api.larapulse.com';</script>
<style>.page_speed_614488962{ display: block; } .page_speed_1333123385{ margin-bottom: 0; display: none } .page_speed_626321815{ display: none; } .page_speed_1426602467{ top: -420px; display: none; }</style>
</head><body><div id="blog" class="page_speed_614488962"><header id="header" data-behavior="1"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><h3 class="header-title"><a class="header-title-link" href="/">Larapulse Blog</a></h3><a class="header-right-picture" href="/#about"><img class="header-picture" src=/assets/logo_30x30.jpg width=30px height=30px></a></header><nav id="sidebar" data-behavior="1"><div class="sidebar-profile"><a href="/#about"><img class="sidebar-profile-picture" src=/assets/logo_90x90.jpg width=90px height=90px></a><span class="sidebar-profile-name">Larapulse Blog</span></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link " href="/"><i class="sidebar-button-icon fa fa-lg fa-home"></i><span class="sidebar-button-desc">Home</span></a></li><li class="sidebar-button"><a class="sidebar-button-link " href="/announcements"><i class="sidebar-button-icon fa fa-lg fa-bell"></i><span class="sidebar-button-desc">Announcements</span></a></li><li class="sidebar-button"><a class="sidebar-button-link " href="/#about"><i class="sidebar-button-icon fa fa-lg fa-question"></i><span class="sidebar-button-desc">About</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link " href="/faq"><i class="sidebar-button-icon fa fa-lg fa-comments"></i><span class="sidebar-button-desc">FAQ</span></a></li><li class="sidebar-button"><a class="sidebar-button-link " href="https://github.com/larapulse" target="_blank"><i class="sidebar-button-icon fa fa-lg fa-github"></i><span class="sidebar-button-desc">GitHub</span></a></li></ul><ul class="sidebar-buttons"></ul></nav><div id="main" data-behavior="1"><section class="main-content-wrap"><article class="post article"><div class="post-header"><h1 class="post-title text-center"> PHP variables under the hood </h1><div class="post-meta text-center"><p class="published-line"><time content="Thu, Sep 13, 2018 7:06 PM"> Sep 13, 2018 </time> by Sergey Podgorny</p><span class="badge chip chip-variables-under-the-hood"><a href="/php"> PHP </a></span><span class="badge complexity-badge complexity-8"> Complexity: High</span><span class="tags"><a href="#">#php</a><a href="#">#zval</a><a href="#">#under-the-hood</a><a href="#">#variables</a><a href="#">#refcount</a><a href="#">#is_ref</a><a href="#">#structures</a><a href="#">#pointers</a></span></div></div><br><div class="breadcrumb non-printable"><a href="/categories">All categories</a> &raquo; <a href="/programming-languages">Programming languages</a> &raquo; <a href="/php">PHP</a> &raquo; <span class="inactive">PHP variables under the hood</span></div><hr><div class="post-content printable" onload="prettyPrint();"><p>Variables in PHP are some containers that store the type of the variable, its value, the amount of referring variables to this container, and the flag - whether this variable is referenced.</p><p><img src=/assets/b5682fe42ea60839c2eec5b7303d5b9914d3a6f0.png alt="PHP variables under the hood" ></p><h3>Structures and Pointers</h3><p><strong>Structures</strong> are very similar to classes, but they can not have methods, just data, pointers to data and pointers to functions. Declaring a structure in C, you define the data type. And when defining a variable, you can write the name of this structure in place of the type of that variable, like so:</p><pre  class="line-numbers"><code class="language-c">my_super_struct super_struct_instance;</code></pre><p><strong>Pointers</strong> are like variables, but their values store an address in memory. Reference variables behave like dereferenced pointers, that means they access values of the pointer. Let's look at an example:</p><pre  class="line-numbers"><code class="language-c">// defining pointer `foo`, that will points to variable with `int` type
int *foo;
// defining variable with `int` type
int bar = 3;

// taking reference to variable `bar` and assigning it to pointer.
// `foo` stores memory address, where `bar` stores
foo = &amp;bar;

// with an asterisk we dereference the pointer (take the value at its address) and increment the value
(*foo)++;

// we increment the pointer itself, that means the pointer will refers at another value
foo++;</code></pre><p><img src=/assets/16912e5d126cdf7feccf99f92c41a303cacfa68d.png alt="Dealing with pointers" ></p><h3>Containers</h3><p>The container is a structure called <code>zval</code> (short for <strong>“Zend value”</strong>), it represents an arbitrary PHP value and looks like this:</p><pre  class="line-numbers"><code class="language-c">struct zval {
    zvalue_value value;
    zend_uchar type;
    zend_uchar is_ref;
    zend_ushort refcount;
};</code></pre><p>As we can see, there is a value, a type, a flag and a amount of referring variables. PHP <code>zval</code> supports following 8 types:</p><ul><li><code>BOOL</code></li><li><code>LONG</code><em>(signed integer type)</em></li><li><code>DOUBLE</code><em>(used to store floating point numbers)</em></li><li><code>STRING</code></li><li><code>ARRAY</code></li><li><code>OBJECT</code></li><li><code>RESOURCE</code></li><li><code>NULL</code></li></ul><p><code>zvalue_value</code> is an <code>union</code>. Union is a special type that may have several members declarations of different types, but only one will be used. That how it defines:</p><pre  class="line-numbers"><code class="language-c">typedef union _zvalue_value {
    long lval; // integer
    double dval; // float
    struct {
        char *val;
        int len;
    } str; // string
    HashTable *ht; // array
    zend_object obj; // object
} zvalue_value;</code></pre><p>As a result, when you create a variable of this type, it will take in memory exactly as much as occupies the heaviest element of unions.</p><p><img src=/assets/2b14977ba7eea51082fe6da32c437928318a1fec.png alt="PHP variable creation" ></p><h3>Why do we need all this</h3><p>First, let's figure out why we need <strong>refcount</strong>. That's very simple: when you assign to a variable a value of another variable, they both refer to one <code>zval</code>, and <code>refcount</code> increments.</p><p><img src=/assets/00e806411395f52d4ae16cefd30f412b98ad8f90.png alt="2 variables refers to the same memory place" ></p><p>Now, if you change the value of one of these variables, PHP seeing the <code>refcount</code> greater than 1, will copy this <code>zval</code>, make the changes there, and your variable will point already to the new <code>zval</code>. It will look something like this:</p><table><thead><tr><th>PHP</th><th>Under the hood</th></tr></thead><tbody><tr><td><pre  class="line-numbers">
<code class="language-php">$foo = "baz";
$bar = $foo;
</code></pre></td><td><pre  class="line-numbers">
<code class="language-c">bar,foo: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 2
}
</code></pre></td></tr><tr><td><pre  class="line-numbers">
<code class="language-php">$bar .= "q";
</code></pre></td><td><pre  class="line-numbers">
<code class="language-c">foo: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 1
}
bar: {
    type: string,
    value:
        str:
            val: "bazq"
            len: 4
    is_ref: 0
    refcount: 1
}
</code></pre></td></tr></tbody></table><p>This technique is called <strong>&quot;copy on write&quot;</strong> and it allows to reduce memory consumption quite well. Also, <code>refcount</code> is needed for the <strong>garbage collector</strong>, which removes from memory all <code>zval</code>s, which have <code>refcount = 0</code>.</p><p>And what happens with references? And <strong><code>is_ref</code></strong> is working? That's very simple: if you create a reference from a variable, the is_ref flag becomes 1, and the above optimization for this zval will not be applied.</p><table><thead><tr><th>PHP</th><th>Under the hood</th></tr></thead><tbody><tr><td><pre  class="line-numbers"><code class="language-php">$foo = "baz";
$bar = $foo;</code></pre></td><td><pre  class="line-numbers">
<code class="language-c">bar,foo: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 2
}
</code></pre></td></tr><tr><td><pre  class="line-numbers">
<code class="language-php">$baz = &$foo;</code></pre></td><td><pre  class="line-numbers">
<code class="language-c">baz,foo: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 1
    refcount: 2
}
bar: { // variable `bar` was allocated to a separate `zval`
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 1
}
</code></pre></td></tr><tr><td><pre  class="line-numbers">
<code class="language-php">$qwe = $foo;</code></pre></td><td><pre  class="line-numbers">
<code class="language-c">baz,foo: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 1
    refcount: 2
}
bar: {
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 1
}
qwe: { // this variable was also allocated to a separate `zval`
    type: string,
    value:
        str:
            val: "baz"
            len: 3
    is_ref: 0
    refcount: 1
}
</code></pre></td></tr></tbody></table><p><strong>Original: </strong><i class="fa fa-fw fa-file-text link-type-icon"></i><a href="https://habr.com/post/162713/" target="_blank" rel="nofollow">Как устроены переменные в PHP </a> (Russian) </p><hr><div class="resources collapsable-block non-printable"><p class="collapsable"><i class="fa fa-arrow-circle-right arrow"></i><strong>Resources</strong><i class="fa fa-fw fa-info-circle info"><span class="tooltip-box">Click to expand/shrink</span></i></p><ol class="page_speed_1333123385"><li><i class="fa fa-fw fa-file-text link-type-icon"></i><a href="http://www.phpinternalsbook.com/php7/internal_types/zvals/basic_structure.html" target="_blank" rel="nofollow">PHP7 Basic structures </a></li></ol></div></div><div class="post-meta post-footer"><span class="post-footer-tags tags"><i class="fa fa-fw fa-tags"></i><a href="#">#php</a><a href="#">#zval</a><a href="#">#under-the-hood</a><a href="#">#variables</a><a href="#">#refcount</a><a href="#">#is_ref</a><a href="#">#structures</a><a href="#">#pointers</a></span><div class="author"></div><div class="post-actions-wrap non-printable"><nav><ul class="post-actions post-action-nav"></ul></nav><ul class="post-actions post-action-share"><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//plus.google.com/share?url=/php/variables-under-the-hood" ><i class="fa fa-google-plus"></i></a></li><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//www.facebook.com/sharer/sharer.php?u=/php/variables-under-the-hood&title=PHP+variables+under+the+hood" ><i class="fa fa-facebook-official"></i></a></li><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//twitter.com/intent/tweet?text=PHP variables under the hood&url=/php/variables-under-the-hood&via=@LarapulseT" ><i class="fa fa-twitter"></i></a></li></ul></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="1"><div class="post-actions-wrap non-printable"><nav><ul class="post-actions post-action-nav"></ul></nav><ul class="post-actions post-action-share"><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//plus.google.com/share?url=/php/variables-under-the-hood" ><i class="fa fa-google-plus"></i></a></li><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//www.facebook.com/sharer/sharer.php?u=/php/variables-under-the-hood&title=PHP+variables+under+the+hood" ><i class="fa fa-facebook-official"></i></a></li><li class="post-action"><a class="post-shares post-action-btn btn btn--default" target="_blank" href="//twitter.com/intent/tweet?text=PHP variables under the hood&url=/php/variables-under-the-hood&via=@LarapulseT" ><i class="fa fa-twitter"></i></a></li></ul></div></div></div></article><div class="back-top-wrapper non-printable"><div class="top-btn"><i class="arrow-up"></i></div></div></section><footer id="footer" class="main-content-wrap"><nav class="non-printable"><a href="/data-protection/privacy-policy">Privacy policy</a><a href="/data-protection/cookie-policy">Cookie policy</a></nav><span class="copyrights"> Copyrights &copy; 2025 <a href="https://podgornyy.rocks" target="_blank">Sergey Podgornyy</a>. All Rights Reserved. <br> Designed by <a href="http://louisbarranqueiro.github.io/hexo-theme-tranquilpeak/" target="_blank">Louis Barranqueiro</a></span><span class="socials"><a href="https://www.youtube.com/channel/UC3wminGFli412MBDKkdUufQ" target="_blank" title="Larapulse at YouTube"><i class="fa fa-youtube-play fa-fw"></i></a><a href="https://www.instagram.com/larapulse.technology/" target="_blank" title="Larapulse at Instagram"><i class="fa fa-instagram fa-fw"></i></a><a href="https://www.facebook.com/larapulse/" target="_blank" title="Larapulse at Facebook"><i class="fa fa-facebook-square fa-fw"></i></a><a href="https://www.linkedin.com/company/larapulse/" target="_blank" title="Larapulse at LinkedIn"><i class="fa fa-linkedin-square fa-fw"></i></a><a href="https://twitter.com/LarapulseT" target="_blank" title="Larapulse at Twitter"><i class="fa fa-twitter fa-fw"></i></a><a href="http://t.me/larapulse" target="_blank" title="Larapulse at Telegram"><i class="fa fa-telegram fa-fw"></i></a></span></footer></div></div><div id="about" class="popup-full non-printable page_speed_626321815"><div id="about-card" class="page_speed_1426602467"><div id="about-btn-close"><i class="fa fa-remove"></i></div><img id="about-card-picture" src=/assets/larapulse_logo_250.png><h4 id="about-card-name">Larapulse Technology Blog</h4><h5 id="about-card-bio"><p> Information Technology blog and group of developers interesting in modern technologies, well-written code and further education </p></h5><h5 id="about-card-job"><i class="fa fa-university"></i><br><p>Founded at 2017</p></h5><h5 id="about-card-location"><i class="fa fa-map-marker"></i><br><p>Germany</p></h5></div></div><div id="cover"></div><script src=/assets/main.4065552450.js></script><div id="gdpr-modal" class="hidden non-printable"><div class="gdpr-modal-inner-wrap"><div class="gdpr-modal-inner"><div id="gdpr-modal-main" class=""><h2>Have a Cookie? :)</h2><img src=/assets/cookie.png alt="cookies"><p> Our site uses cookies to provide functionality and performance as well as for social media and advertising purposes. Social media and advertising cookies of third parties are used to offer you social media functionalities and personalized ads for Larapulse Technology content and offers. To get more information about these cookies and how we process personal data, check our <a href="/data-protection/privacy-policy" target="_blank">Privacy Policy</a>. Do you accept the use of cookies and the processing of personal data involved? </p><div class="button-wrap"><button class="gdpr-button button-secondary" onclick="gdpr_show_more_info()">More Information</button><button class="gdpr-button button-primary" onclick="gdpr_accept()" id="gdpr-accept-btn">Yes, I accept</button></div></div><div id="gdpr-modal-more-info" class="hidden"><h2>Your Cookie Settings</h2><form><div class="gdpr-modal-checkbox"><input type=checkbox id="gdpr-func-checkbox" value="yes" checked="checked" disabled><label for="gdpr-func-checkbox">Site functionality and performance</label></div><p> These cookies are required for Larapulse Technology site functionality and are therefore always enabled. These include cookies that allow you to be remembered as you explore the Larapulse Technology site, help make the shopping cart and checkout process possible as well as assist in security issues and conforming to regulations. To use the Larapulse Technology website, you have to consent to these cookies and the processing of personal data according to the Larapulse Technology website terms of use and privacy policy. </p><div class="gdpr-modal-checkbox"><input type=checkbox id="gdpr-social-checkbox" value="yes" checked=""><label for="gdpr-social-checkbox">Social media and advertising</label></div><p> Social media cookies offer the possibility to connect you to your social networks and share content from our website through social media. Advertising cookies (of third parties) collect information to help better tailor Larapulse Technology advertising to your interests, both within and beyond Larapulse Technology websites. De-selecting these cookies may result in seeing advertising that is not as relevant to you or you not being able to link effectively with Facebook, Twitter, or other social networks and/or not allowing you to share content on social media. </p></form><div class="button-wrap"><button onclick="gdpr_hide_more_info()" class="gdpr-button button-primary">Back</button></div></div></div></div></div><script> "use strict"; var domain = 'larapulse.com'; var GDPR, GDPR_FUNCTIONAL_COOKIE_CONSENT = "no", GDPR_SOCIAL_COOKIE_CONSENT = "no"; function gdpr_accept() { GDPR.userAccept(); } function gdpr_show_more_info() { GDPR.hideElement("gdpr-modal-main"); GDPR.showElement("gdpr-modal-more-info"); } function gdpr_hide_more_info() { GDPR.hideElement("gdpr-modal-more-info"); GDPR.showElement("gdpr-modal-main"); } function should_use_functional_cookie() { return "yes" == GDPR_FUNCTIONAL_COOKIE_CONSENT; } function should_use_social_cookie() { return "yes" == GDPR_SOCIAL_COOKIE_CONSENT; } function show_cookies_settings() { GDPR.showPopup(); gdpr_show_more_info(); } (GDPR = { functional_cookie_consent: !1, social_cookie_consent: !1, opinionGiven: !1, clickedFormObj: null, formChecked: !1, init: function() { this.checkConsent(); !0 === this.opinionGiven || this.isEuCountry() && (window.onload = function() { "/data-protection/privacy-policy" !== window.location.pathname && "/data-protection/cookie-policy" !== window.location.pathname && GDPR.showPopup() } ) }, checkConsent: function() { var o = this.getCookie("functional_cookie_consent"), t = this.getCookie("social_cookie_consent"); "" !== o || "" !== t ? ( this.opinionGiven = !0, "yes" === o && ( this.functional_cookie_consent = !0, GDPR_FUNCTIONAL_COOKIE_CONSENT = "yes" ), "yes" === t && ( this.social_cookie_consent = !0, GDPR_SOCIAL_COOKIE_CONSENT = "yes" ) ) : this.isEuCountry() || (GDPR_SOCIAL_COOKIE_CONSENT = GDPR_FUNCTIONAL_COOKIE_CONSENT = "yes") }, setConsent: function(o, t) { "yes" !== (t = void 0 === t ? "yes" : t) && "no" !== t || ("both" === o ? (this.setCookie("functional_cookie_consent", t, 129600), this.setCookie("social_cookie_consent", t, 129600), this.updateFormSocialConsentField(t), this.updateFormFunctionalConsentField(t)) : ("social" === o && (this.setCookie("social_cookie_consent", t, 129600), this.updateFormSocialConsentField(t)), "functional" === o && (this.setCookie("functional_cookie_consent", t, 129600), this.updateFormFunctionalConsentField(t))), this.checkConsent()) }, deleteConsent: function(o) { "both" === o ? (this.deleteCookie("functional_cookie_consent"), this.deleteCookie("social_cookie_consent")) : "functional " === o ? this.deleteCookie("functional_cookie_consent") : "social" === o && this.deleteCookie("social_cookie_consent") }, userAccept: function() { if (!0 === document.getElementById("gdpr-social-checkbox").checked ? this.setConsent("both", "yes") : (this.setConsent("social", "no"), this.setConsent("functional", "yes")), null !== this.clickedFormObj) { this.checkConsent(); var o = this.clickedFormObj; this.formChecked = !0, o.find(".mktf_submit_button").first().trigger("click"), this.hidePopup() } else document.getElementById("gdpr-accept-btn").disabled = !0, location.reload() }, updateFormSocialConsentField: function(o) { null !== this.clickedFormObj && this.clickedFormObj.find(".mktf_Cookie_Opt_In__c").first().val(o) }, updateFormFunctionalConsentField: function(o) { null !== this.clickedFormObj && this.clickedFormObj.find(".mktf_Functional_Cookie_Opt_In__c").first().val(o) }, showPopup: function() { "no" === this.getCookie("social_cookie_consent") && (document.getElementById("gdpr-social-checkbox").checked = !1), this.showElement("gdpr-modal") }, hidePopup: function() { this.hideElement("gdpr-modal") }, showElement: function(o) { var t = document.getElementById(o); this.removeClass(t, "hidden") }, hideElement: function(o) { var t = document.getElementById(o); this.addClass(t, "hidden") }, hasClass: function(o, t) { return o.classList ? o.classList.contains(t) : !!o.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)")) }, addClass: function(o, t) { o.classList ? o.classList.add(t) : this.hasClass(o, t) || (o.className += " " + t) }, removeClass: function(o, t) { if (o.classList) o.classList.remove(t); else if (this.hasClass(o, t)) { var e = new RegExp("(\\s|^)" + t + "(\\s|$)"); o.className = o.className.replace(e, " ") } }, setCookie: function(o, t, e) { var i = ""; if (null != e) { i = "; expires=" + (i = new Date((new Date).getTime() + 36e5 * e)).toGMTString(); var n = "; path=/" } document.cookie = o + "=" + escape(t) + i + n }, getCookie: function(o) { var t = "" , e = o + "="; if (0 < document.cookie.length) { var i = document.cookie.indexOf(e); if (-1 !== i) { i += e.length; var n = document.cookie.indexOf(";", i); -1 === n && (n = document.cookie.length), t = unescape(document.cookie.substring(i, n)) } } return t }, deleteCookie: function(o) { document.cookie = o + "=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+domain+";" }, isEuCountry: function(o) { /** TODO */ return true; if ("" === (o = void 0 === o ? "" : o)) { var t = GDPR.getCookie("geoip"); if ("" !== t) o = t.split(",")[0] } return "" !== o && -1 !== ["AT", "BE", "BG", "HR", "CY", "CZ", "DK", "EE", "FI", "FR", "DE", "GR", "HU", "IE", "IT", "LV", "LT", "LU", "MT", "NL", "PL", "PT", "RO", "SK", "ES", "SE", "GB"].indexOf(o) } }).init();</script></body></html>